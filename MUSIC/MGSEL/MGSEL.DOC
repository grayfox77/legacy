MGSEL version 3.01v			Copyright(c) 1991-94 by Ain

　このプログラムを使用するには、MGSDRV v3.17以上と、v3.00以上の演奏データが
必要です(v3.00以下のデータはversion errorになります)。v2のデータは、MGSCNV
v2.02を使用してv3形式に変換させて下さい。v1のデータは、MGSCNV v1.00を使用し
て一端v2.00へ変換してからv3形式へ変換させて下さい。
  最低でも本体がMSX2でMSXDOS1が使える環境なら動作しますが、かなり機能が制限
されてしまいますのでturbo R若しくはMSXDOS2上で使用する事をお薦めします。

★ 起動方法

書式:MGSEL [ドライブ/パス名]

　パラメーターにはディレクトリファイル(.DIR)が存在するディレクトリ(ドライブ)
を指定して下さい。指定が無ければカレントディレクトリと見なします。Bトリガを
押しながら起動すると、フォントデータ(.CNF参照)の読み込みをキャンセルできます。

★ 環境変数(DOS2)

　MGSELでは次の環境変数を参照します。

　DATE 		画面右上に表示される日付の形式
　MGSDRV	ドライバのファイル名

　DATE環境変数はDOSと同じ形式です。MGSDRV環境変数はドライバが常駐されていな
い場合に検索させるファイル名をルートからのフルパスで設定して下さい(ドライバ
が常駐している場合は設定する必要はありません)。環境変数がエラーになると、MG
SEL.COMが呼び出されたディレクトリからMGSDRV.COMを検索します。DOS1では常にカ
レントドライブから検索しますので、MGSEL.COMと同じドライブにMGSDRV.COMを置い
てください。

　例:	set mgsdrv=h:\sys\mgsdrv.com
		   ^^^^^^^ドライブとディレクトリ

★ コンフィグレーションファイルについて

　MGSELでは起動時にMGSEL.CNFというファイルを検索し、その内容に従って初期設
定が行なわれます。DOS1ではカレントドライブ、DOS2ではMGSEL.COMが呼び出された
ディレクトリから検索されます(無い場合はデフォルトになりエラーにはなりません)。
書式などについては付属のMGSEL.CNFを参照して下さい。

★ ディレクトリファイル(.DIR)について

　ディレクトリファイルとはそのサブディレクトリに属する曲データのタイトルやフ
ァイル名を書いたテキストファイルです。書式は、

	　	ファイル名,タイトル

です。ファイル名とタイトル名はカンマで区切ります。ファイル名にはドライブ名や
パスの指定を含む事は出来ません。ファイル名は大小文字問わず受け付けます。DOS2
では、

		#ディレクトリ,タイトル

　と書くと、そのディレクトリファイル内の演奏データを読む際に、指定されたディ
レクトリから読むようになります(1ファイルにつき1回のみ指定可能)。タイトル名は
ディレクトリ選択時に表示されます。

　例:		#c:\ys2,ＹｓII
		ys200,To make the end of battle
		ys201,Lilla

　ディレクトリを省略する("#,"と書く)とカレントディレクトリから読みます。
　この行は出来るだけファイルの最初に書くようにして下さい。DOS1では指定して
　も無視されます。

　v3.00v以降では、曲データ毎に演奏開始時の音量が設定できます。設定したいファ
イルの行の直前に"%v:"と書き、続いて音量を16進数で指定して下さい。

　例:		%v:ccc,fffff,eeeeeeeee
		grd-4,Konami GRADIUS Stage 4
		grd-5,Konami GRADIUS Stage 5

　この場合、トラック1〜3の音量を12に、トラック4〜8を15に、トラック9〜17を14
にしています。カンマは単なる区切りですので、書かなくても構いません。この指
定は次の1ファイルのみ有効(この場合、"grd-4")で、次のファイル("grd-5")では初
期値(トラック1〜17まで15)に戻されます。なお、この指定は機種IDによる音量補正
よりも優先されます。

　曲データは1ディレクトリにつき、255曲まで認識します。ファイル名を"MGSEL.DI
R"にすると、優先的にそのファイルを読み込むようになります。ディレクトリファイ
ルはテキストエディタでも編集できますが、MGSF.COMを使用すると簡単に行なえます。
なお、DOS1ではディレクトリ選択機能がありませんので、ファイル名を"MGSEL.DIR"
にしないと認識しません。


★ 画面説明

===========================================================================
MGSEL version 3.xx
Copyright(c) 1991-...

            (5)                                (9)

				 □□□□□□□□□□□□□□□□□
Drive :   (1)  F.out speed: (3)                (A)
Volume:   (2)  Auto mode  : (4)  P.count: (6) Seg:(7) Filename:(8)
============================================================================
                             (11)
============================================================================

(1) ドライブ
    オンライン状態になっている全てのドライブを表示しています。反転している所
    がカレント(各種データ読み込みの対象になる)ドライブです。ドライブ名の上を
    直接クリックしてカレントドライブを変更する事が出来ます。

(2) 主音量
    現在の主音量(マスタボリューム)を16段階のグラフで表示しています。表示部を
    直接クリックすると現在の設定値を変更出来ます。変更した音量は再度変更しな
    い限り保持されます(フェードアウトを行うと勝手に変わりますが、後で元に戻
    ります)。

(3) フェードアウト速度/ループ回数
    "F.out speed:??"となっている時はフェードアウト速度を表示してします。
    "Loop count :??"の時は自動演奏モード(4)がoff以外の時のみ有効で、ここで指
    定された回数だけ曲がループすると自動的にフェードアウトを開始して次の曲を
    演奏します。F.out speedとLoop count及びその設定値はそれぞれの部分をクリッ
    クすると変更出来ます。

(4) 自動演奏モード
    自動演奏モードを表示しています。"off"になっていると自動演奏は行われませ
    ん。演奏モードには以下の5種類があります。

    ・Normal	上から順番に演奏。
    ・Random	乱数で次の曲を選択。
    ・Repeat	演奏中の曲を演奏。
    ・IntroN	.cnfのintro_timeの時間が経過したら次の曲を演奏。
    ・IntroR	.cnfのintro_timeの時間が経過したら乱数で次の曲を選択。

(5) キーボード/バンドメーター

    ・キーボード
    発音されている全トラックの音階を黒い点で表示します。上段がオクターブ5〜8、
    下段が1〜4です。ドライバから得た音階番号を元に表示していますので、音色、
    LFO、ポルタメントなどの効果によって周波数がずれている音は正確に表示しま
    せん。

    ・バンドメーター
    キーボードと違いグラフィカル(何処が^^;)に音階を表示します。左端がオクタ
    ーブ1のcで、右端がオクターブ8bです。処理が異常に重いので、turbo Rでも使
    用トラック数が多い曲を演奏させるとキー反応などがかなり鈍くなります。

    キーボードとバンドメーターは表示している部分を直接クリックすると変更で
    きます。

(6) 演奏経過時間
    演奏が開始されてから経過した時間を表示しています。単位は秒ですが、ドライ
    バ内部のカウンタを使用しているため、実際の秒とは若干誤差があります。早送
    りする時の目安にでもして下さい。

(7) 使用中セグメント
    現在使用中のセグメント番号を表示しています。MGSDRV常駐時でないと意味を持
    ちません("Seg:-"と表示されます)。曲データの読み込みはこのセグメント番号
    に対して行います。MGSDRV常駐時に/bオプションを指定しなかった場合はセグメ
    ントが一つしか確保されないので意味がありません。MGSDRVの.docと併せて読め
    ばそのうち分かるでしょう。番号は直接クリックして変更できます。

(8) 直前に読み込んだ曲データのファイル名
    そのまま。拡張子は除いてあります。

(9) 演奏中の曲のタイトル名
    これもそのまま。ここをクリックすると再演奏できます。

(A) レベルメーター

   (B)
    =   =                  =■
    =(C)=■                =■
    =■ =■                =■
    =■ =■                =■
    ------------- ........ ----
     ■  ■  □             ■
     1   2   3              H
    (D)

    ・トラック音量(B)
      図では分かりにくいのですが、レベルメーターの左脇にある目盛の事です。
      これはトラック毎の主音量を16段階で表しています。直接クリックすると、
      そのトラックの音量を変更できます。同じ曲を再演奏した場合はそのまま保
      時されますが、演奏開始を行うとクリア(全て最大)されます。

    ・レベルメーター(C)
      音階を発音した瞬間に現在音量(MMLのVコマンド設定値)まで伸びてから1カウ
      ント毎に下がります。現在音量はトラック音量表示部の右脇(レベルメーター
      と同じX座標)に横線で表示されています。現在音量は音階が発音した瞬間に
      更新されますので、キーオンせずに音量を変更している(MMLで"b&(b&(b&"など
      としている)場合は変化しません。

    ・トラック番号/ミュートスイッチ状態(D)
      トラック番号はMGSCで使用しているそれと、キー操作に対応します。この番号
      は音源がされていないトラックでは表示しません(例えばSCC音源もFM音源も接
      続されていないと表示するのは1,2,3のみです)。

      ミュートスイッチは押す毎にON(消灯"□")、OFF(点灯"■")します。MGSELでは
      その曲中でしか有効でなく、演奏再開したり別の曲を演奏すると初期状態に戻
      ります。

★ キー操作

　※ マウス使用時には受け付けないものもあります。
     F6〜F10はSHIFTを押しながらF1〜F5を押します。

　1〜H		トラックのミュートON、OFF
　↑,8		バーを上に移動させる(数字はテンキー)
　↓,2		バーを下に移動させる
　←,4		ページアップさせる
　→,6		ページダウンさせる
  SHIFT+(↑,8)	カーソルバーを移動せずに上スクロール
  SHIFT+(↓,2)	カーソルバーを移動せずに下スクロール
  SHIFT+(←,4)	カーソルバーを移動せずにページアップ
  SHIFT+(→,6)	カーソルバーを移動せずにページダウン
　-		一番上の行(画面)へジャンプする
　+		一番下の行(画面)へジャンプする
　.		演奏の中断、再開(テンキー)
　,		演奏を停止させる(テンキー)
  HOME		自動演奏モードを変更する。
　SPC,RET,5	バー(カーソル)が示している曲を演奏する(5はテンキー)
　TAB		ディレクトリ選択(ディスクバッファはクリアされる)
　CTRL		ドライブ名の選択
　F1,P		既にロードされている曲を最初から演奏しなおす(再演奏)
　F2		早送り1(倍速)
　F3,SELECT	早送り2(超高速。表示の更新を行なわない)
　F4		演奏を遅くする
　F5		演奏を停止させる(,と同じ)
　F6,/		フェードアウト(/はテンキー)
　F7		歌詞表示のON/OFF
　F8,0		操作切り替え(0はテンキー)
　F9		演奏を止めてから終了
　F10		演奏を止めずに終了(※)
  M		演奏ファイルを検索させる(ディレクトリ選択時のみ)
  S		キーボード/バンドメーター表示切り替え
  >		セグメント番号を1つ増やす(※)
  <		セグメント番号を1つ減らす(※)
　INS		音量を1つ上げる
　DEL		音量を1つ下げる
　ESC		F9と同じ
　SHIFT+ESC	F10と同じ
  SHIFT+TAB	ディレクトリ選択へ(ディスクバッファをクリアしない)
  SHIFT+1〜H	それぞれの音源毎のミュート状態を反転させる。
　Bトリガ	1番最初の曲名表示されている座標より下でクリックすると、
		演奏の中断、開始。それより上ではクリックする場所によっ
		て機能が異なる。

		ミュートON/OFF		SHIFT+1〜Hを押した時と同じ
		レベルメータ		PSG,SCC,FMトラックの音量を一度
					に変更する。
		ドライブ名		SHIFT+TABと同じ。

※ MGSDRV常駐時のみ有効

★ ディレクトリツリー表示機能(DOS2のみ)

   ディレクトリ移動時に.cnfのdir_tree_fileで指定されたファイルが存在してい
ればディレクトリツリーを表示します。指定が無い、又はそのファイルの読み込み
に失敗した場合はv3.01lまでと同じくカレントディレクトリ内のサブディレクトリ
を検索して表示します。
  filmtn.exeが作成するfilmtn.dir(書式が合っていれば他のファイルでも可)を使
用した場合、ドライブ名はカレントドライブに置き変わります。mm.comが作成する
mmtree.dirの場合はドライブ名が"?"の場合のみカレントドライブへの置き換えを
行ない、他のドライブ名はそのまま残ります。不可視ディレクトリは表示しません。
表示可能な階層数は16階層までです(それ以上は無視します)。

★ 演奏ファイルのダイレクト演奏機能(DOS2のみ)

  カレントディレクトリにDIRファイルが一つも存在しない場合、演奏ファイルのリ
ストを表示して、それを選択して演奏させる事が出来ます([M]キーを押すとDIRファ
イルがあっても表示します)。今までは曲データを新しく追加した場合、MGSFやテキ
ストエディタ等を使用してディレクトリファイルを作成しなければなりませんでした
が、この機能によりディレクトリファイルを作成しなくともそのまま演奏ファイルを
聴くことが出来ます。ただし自動演奏が出来ない、タイトル名が表示されないなどの
制限があります(手抜きではなく仕様)。

★ メモリマッパの使用について

  起動時にプライマリマッパがあれば最大2枚を確保します。1枚目はディレクトリ
移動時の曲データ保存に使用されます。後の1枚よりこちらを優先して確保しますが、
確保できなかった場合は起動及び、ディレクトリ移動時にそのセグメントをワーク
エリアに使用するので曲データが破壊されます。2枚目は使用目的がくだらないので
敢えて伏せます。

★ その他

・キーボードの場合、BトリガはGRAPHキーになります。ジョイスティックはポートA、
　Bの両方に対応しています。マウスの場合Aトリガは左ボタン、Bトリガは右ボタン
　です。マウスはポートAのみ対応しています(マウスの接続は起動時に判別されます)。
・一部のマシンでは正常に動作しない場合があります(特に古いMSX2)。改造済みマシ
  ン(クロックアップ等)での動作は保証できません。
・TPAは48k以上必要です。足りない場合はエラーが出て終了します。
・DOS2上で使用する場合は必ずDOS2のシステムファイルを使用して下さい。DOS2の
  状態(Disk BASIC v2.xx)でMSXDOS.SYS,COMMAND.COMを使用すると異常動作します。
・余分な周辺機器はなるべく取り外しておいてください。MSX-MIDIやMSX-AUDIOなど
  の割り込みが掛かる周辺機器を使用しているとの動作速度が乏しく低下します。
・前バージョンからの変更点についてはMGSEL???.HISをご覧下さい。
・転載、配布は自由に行なって下さい。

Special thanks to:BLASTER,Saibara,[MARIO],(YMD)A,TARO
		  ﾏｯﾃｨｰ,TAKAWO,ITA,NUMCHU

※ MGSFはサイバラ氏が作成されたフリーソフトウェア、
   MGSMIS,MMはMOGU氏が作成されたフリーソフトウェア、
   FILMTNはK.Ishida氏が作成されたフリーソフトウェアです。

参考:MDXS.Xとドキュメント。その他MXDRV関連ソフト。

MARIO NET  :AIN
FALCON NET :FALC0180
NATSUME NET:NAT25667

　　Ａｉｎ

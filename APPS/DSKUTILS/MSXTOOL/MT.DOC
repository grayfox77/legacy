              Описание программы MSXTOOL.COM

                    О г л а в л е н и е

1.  Перемещение по списку и пометка
    1.1 Перемещение по списку
    1.2 Пометка файлов
2.  Переопределение устройства вывода
3.  Копирование ( Команда COPY )
4.  Вывод на экран ( Команда TYPE )
5.  Переименовывание ( Команда RENAME )
6.  Удаление ( Команда DELETE )
7.  Форматирование диска ( Команда FORMAT )
8.  Карта файлов ( Команда FILES' MAP )
9.  Сортировка ( Команда SORT )
    9.1 Сортировка помеченных файлов между собой
    9.2 Сортировка помеченных файлов с помещением их имен в
        начало списка
    9.3 Сортировка помеченных файлов с помещением их имен
        перед текущим именем
10. Смена диска и маски директория ( CHANGE )
11. Дисковый редактор ( EDITOR )
12. Запуск командных файлов ( EXECUTE )
13. Сравнение двух файлов ( COMP )


                 1.1 Перемещение по списку
     Список   файлов   представляет    собой    колонку    с
именами, длинами и датами  создания  файлов.  Из  всей  этой
колонки на экран выводится не более 28 имен, причем  столбик
с именами рассечен посередине на два, как на IBM/PC в прог-
рамме PC-TOOLs.
     Перемещение   по   списку   осуществляется    клавишами
<вверх>,<вниз>,<вправо>  и  <влево>.  Клавиши   <вправо>   и
<влево> позволяют перемещать курсор  из  левого  столбика  в
правый и  наоборот.  Клавиши  <вверх>  и  <вниз>  перемещают
курсор вверх и вниз по списку файлов,  причем  конец  левого
столбика является началом правого.
     Если Вам не нравится, что вы  перемещаетесь  по  списку
слишком   медленно,   можно   воспользоваться   постраничным
перемещением или перемещением в конец либо в начало списка.
     Для того, чтобы переместиться  в  начало  списка,  надо
нажать <CTRL>  и  <вверх>  одновременно,  аналогично,  чтобы
переместиться в конец списка, надо нажать <CTRL> и <вниз>.
     Сместиться на страницу вниз  можно,  если  одновременно
нажать <SHIFT> и <вниз>, после чего  правый  столбик  станет
левым, а правый столбик дополнится именами, идущими далее  в
общем списке.  Перемещение  на  страницу  вниз  производится
аналогичным образом.

                     1.2 Пометка файлов
     Некоторые  команды  MSX-TOOL  работают  с   помеченными
файлами. Помеченный файл имеет свой номер  и  помечается  на
экране цветом, номер помеченного файла выводится  перед  его
именем.
     Чтобы пометить файл,  на  котором  стоит  курсор,  надо
нажать <CR>, причем если ранее этот  файл  был  помечен,  то
произойдет отмена пометки .
     Нажав <F2>, мы можем пометить все файлы с таким  именем
и типом ( ? - означает любой символ ),  а  кнопкой  <F1>  мы
можем сразу и без всяких лишних формальностей  отменить  все
пометки.

            2. Переопределение устройства вывода
     Нажатием <F3> мы  вызываем  окно,  в  котором  MSX-TOOL
спрашивает, выводить ли данные  на  принтер  или  только  на
экран. Это бывает полезно, когда требуется распечатать текст
файла или результаты сравнения на принтере. В  принципе  это
можно сделать еще одним  способом  -  в  MSX-TOOL  действует
подпрограмма печати экрана на принтере ( клавиша <SELECT> ),
но это далеко не всегда удобно, так  как  она  выводит  весь
экран.
     Вот список команд, в которых действует  переопределение
вывода: TYPE, FILES' MAP, INFORMATION, DELETE, COMP.

                       3. Копирование
     MSX-TOOL   копирует   помеченные   файлы   по   порядку
возрастания  номеров  их  пометок.  Чтобы   отдать   команду
копирования, надо в главном режиме нажать кнопку C ( Copy ).
После этого MSX-TOOL спрашивает, какими  должны  быть  имена
получающихся файлов.

                     4. Вывод на экран
     MSX-TOOL умеет печатать содержимое текущего файла (  на
имени которого стоит курсор ), при этом он игнорирует символ
конца файла ( ^Z ) и ориентируется по реальному  его  концу,
что  позволяет  печатать  содержимое  не  текстовых   файлов
целиком.

                    5. Переименовывание
     В  целом  эта  команда  полностью  аналогична   команде
RENAME, но не переименовывает файл в файл с выходным именем,
а копирует его.

                        6. Удаление
     Команда DELETE удаляет с диска все файлы, имена которых
были помечены в списке, печатая имена  удаленных  файлов  по
мере свершения этого "черного дела".

                     7. Форматирование
     Команда FORMAT производит форматирование диска,  причем
делает это через фирменную подпрограмму в ROM дисковода.

                      8. Карта файлов
     После отдачи этой  команды  MSX-TOOL  выдает  на  экран
карту расположения  на  диске  всех  файлов,  имена  которых
считаны в список.
     При этом "*" обозначает занятый кластер, "X" -  плохой,
"R" - зарезервированный, "."  -  пустой  кластер,  а  "S"  -
системный. На самом деле этих самых системных  кластеров  не
существует, но это не суть как важно, ибо так удобнее.

                       9. Сортировка
     Командой SORT мы входим в подрежим, где нам  предлагают
три вида сортировки.  Если  список  не  содержит  всех  имен
файлов,  хранящихся  на   диске,   MSX-TOOL   откажется   от
сортировки. Чтобы выйти из  порежима  сортировки  в  главный
режим надо нажать клавишу ESC.

        9.1 Сортировка помеченных файлов между собой
     Эта команда переставляет имена файлов в  директории  на
диске между  собой  в  соответствии  с  номерами  их  меток.
Непомеченные файлы никоим образом не затрагиваются.

 9.2 Сортировка помеченных файлов с помещением их  имен  в
                       начало списка
     Команда помещает  имена  помеченных  файлов  в  порядке
возрастания номера их пометки на начало директория диска.

 9.3 Сортировка помеченных файлов  с  помещением  их  имен
                    перед текущим именем
     Это то же самое, что и 9.2, но имена помеченных  файлов
помещаются не в начало директория, а перед текущим файлом.

       10. Смена диска и маски директория ( CHANGE )
     По этой команде MSX-TOOL запрашивает новый  дисковод  и
новую маску директория, их ввод осуществляется в окне данных
о диске, конец ввода - <CR>, отказ от смены - <CTRL>+<STOP>.
( ? - любой символ )

              11. Дисковый редактор ( EDITOR )
     Дисковый    редактор    MSX-TOOL    предназначен    для
редактирования секторов диска. Редактор  способен  вычислять
по номеру кластера номер сектора и наоборот, плюс, в отличии
от программы DISKFIXER он ориентирован на работу не только с
гибким диском, но и с программой RAMDISK.
     При входе в редактор MSX-TOOL автоматически запрашивает
номер сектора для редактирования, причем сектор  считывается
лишь в том случае, если последняя нажатая клавиша была <CR>.
     Редактирование сектора осуществляется аналогично  тому,
как это делается в окне  дампа  в  программе  DBG.  Если  Вы
хотите выйти из редактора, нажмите клавишу <ESC>.
     Команды редактора  вызываются  нажатием  функциональных
клавиш F1-F5:
         <F1> - считать сектор в память;
         <F2> - записать сектор на диск;
         <F3> - поиск данных на диске;
         <F4> - считать предыдущий сектор ( sector back );
         <F5> - считать следующий сектор ( sector forward ).
     При  нажатии  <F3>  MSX-TOOL  создает  окно  для  ввода
данных, поиском которых программа  будет  заниматься.  <ESC>
отказ от поиска, <CR> - ввод данных, причем курсор при  этом
должен стоять непосредственно после вводимых  данных.  После
этого  MSX-TOOL  запрашивает  начальный  и  конечный  сектор
области  диска,  где  будут  проводиться  поисковые  работы,
дальше - сидите и ждите сообщений.
     Если MSX-TOOL найдет данные, то Вам будет  выдан  номер
сектора и номер байта в секторе ( нумерация начинается с 0).
При  этом  программа  спросит,  что  ей  делать   дальше   -
прекратить  поиск,  редактировать   найденный   сектор   или
продолжать поиск данных на диске.
     Если данные начинаются в одном секторе, а  кончаются  в
другом,  то  будет  выдан  номер  сектора,  в  котором   они
начинаются.

          12. Запуск командных файлов ( EXECUTE )
     По этой команде MSX-TOOL запускает текущий файл ( файл,
на котором стоит курсор ) . Если файл не командный  (  имеет
расширение не "COM", а какое-либо другое )  ,  то  программа
сделает вид, что ничего не заметила и проигнорирует команду.
     При запуске программы MSX-TOOL проверяет, хватит ли для
нее места в памяти, после чего просит ввести строку  входных
параметров.
     Если по выходе из запущенной программы файл с  MSX-TOOL
не будет обнаружен, то  будет  выдано  сообщение,  требующее
вставить в дисковод диск с MSX-TOOL. Может случиться, что по
каким-то причинам сделать это окажется невозможно,  в  таком
случае не надо отчаиваться, проклинать судьбу  и  создателей
программы, так как они предусмотрели такой случай:  вставьте
диск с MSX-TOOL в дисковод  A  и  нажмите  "а"  -  программа
загрузится с него. Кстати, в этом случае можно  поступить  и
проще - нажать <CTRL> +  <STOP>,  но  тогда  Вы  попадете  в
COMMAND .
     Можно позабавляться: запустить из MSX-TOOL DBG.COM,  из
него MSX-TOOL, из  MSX-TOOL  еще  чего-нибудь,  а  потом  по
очереди выходить из всего этого.

                 13. Сравнение двух файлов
     В  системе  MSX-TOOL  имеется  команда  сравнения  двух
файлов. По этой команде программа сравнивает содержимое двух
последних помеченных файлов и  выдает  на  экран,  где  были
обнаружены различия ( адрес начала различий - адрес конца ).
После окончания сравнения файлов  на  экран  выдается  общее
количество различий  между  ними,  и  сколько  всего  байтов
сравнивалось.
     У команды COMP есть полезное свойство: если файлы имеют
разную длину, то сравнение идет по наименьшей  из  них,  что
дает возможность сравнивать файлы с разными длинами.
     Пример:
     Предположим, что у нас помечено 3 файла на диске A:
                 1 MSXDOS  .SYS   2432
                 2 COMMAND .COM   6656
                 3 COMMAND .OLD   7812
     Мы  хотим  узнать,   чем   отличаются   COMMAND.COM   и
COMMAND.OLD . Для этого мы нажимаем 'O' и получаем ответ.
     Поскольку длина COMMAND.COM меньше  длины  COMMAND.OLD,
то  сравниваться  будут  6656  первых  байтов  этих  файлов.
Допустим, что на экране следующее сообщение:
                 A:COMMAND .COM (length=00001A00)
                 and
                 A:COMMAND .OLD (length=00001E84)
                 Comparing ...
                 00000000-00000009 byte(s) with distinctions
                 00000010-00000010 byte(s) with distinctions
                 Comparation complete
                 Information:
                 00001A00 bytes were compared
                 0000000B bytes with distinctions
     Это значит, что байты с  0-го  по  9-ый  и  16-ый  этих
файлов различные; сравнивалось 6656 байтов и было обнаружено
11 различий.

     Авторы MSX-TOOL:
          В. Бернштейн
          В. Орехов         (под чутким руководством и по ценным указаниям
                             т. Дубовицкого А.А.)

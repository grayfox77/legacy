


        MSX2(VRAM128K)用　テキストエディタ
		viper (v.com) の使い方



　この説明書は、次の章からなります。

 1． viper とは
 2． 簡単な使い方
 3． 注意事項
        仕様についての注意/ブロックカット＆ペースト/検索機能
        疑似子プロセス/ファイラー/テキストの編集

 4． 資料
        本ソフトウエアの内容一覧/起動時のパラメータ
        カスタマイズ/カスタマイズの手順/キーアサインの変更
        キーアサインの設定表/制作過程で参考にした資料

 5． 使用・配布・権利について



 1． viper とは



　viper は，MSX-DOS1で動作するテキストエディタです．
　MSX2(VRAM128KB)以上の機種で動作します．
　漢字には対応していません．

　最高8ファイルまで，同時に編集することができます．
　編集ファイルサイズの制限がありません．

　主な機能はメニューに設定してあります．
　ファンクションキーでメニューを呼び出すことで，簡単に
　操作できます．

　検索，置換機能，カット＆ペースト，
　オートインデントやフリーカーソルなど，
　基本的な機能を完備しています．

　カスタマイザxmarkを使用することにより，
　キーアサイン，画面色，各種機能のスイッチを
　自由にカスタマイズができます．

　一度[DEL][BS]等で削除した文字列は，
　^Uにより無制限に復活できます．

　疑似子プロセスを実現しました．
　編集作業を中断して，他のDOSコマンドを実行できます．

　文字列入力要求時に，入力履歴を参照できます．
　ファイラーを装備しています．

　ESC/P系，MSX(NM)系両方のプリンタをサポートした
　印刷機能を装備しています．



 2． 簡単な使い方



■起動）
　MSX-DOS1を起動し，
A>V
　とします．起動したら編集するファイル名を入力します．

■編集）
　主な機能はファンクションキーで呼び出せます．

■終了）
　F1キーを押したあと，Qを押します．これでDOSに戻ります．
　セーブが必要なら，セーブ後終了してください．



 3． 注意事項



■仕様についての注意）

　ファイラーを起動するとテキストスタックの内容が失われます．
　これは，同じVRAMをワークスペースとして共有しているためです．

  行数は画面行をカウントします．

　カット&ペーストのバッファ（テキストスタック）のサイズに制限は
　ありません（16KBを越えるとヤンクファイルに退避します）．


■ブロックカット＆ペースト）

　^B        [C]ブロックを削除　[M]ブロックを記憶
            [P]ブロックを印刷　[W]ブロックをファイルに出力
  ^J        削除または記憶したブロックを転送
  [GRAPH]J  削除または記憶したブロックを複写（何回でも可）

　操作例

　ブロック削除　^BC
　ブロック複写　^BM のあと複写先へカーソルを動かし ^Jまたは[GRAPH]J
　フロック移動　^BC のあと移動先へカーソルを動かし ^J


■検索機能）

　大文字，小文字を区別しない検索（ファジーサーチ）モードがあります．
　[CTRL]+[L]で，編集画面から検索キーワードを拾えます．
　（[CTRL]+[Q] AND [W]/[Z]で後方／前方検索です．）


■疑似子プロセス）

　編集を継続しながら，一時的にDOSのコマンド，アセンブラなどを
　実行できます．
　DOS画面でコマンド，プログラムを実行したあと，再度V.COMを起動することで
　編集へ復帰できます．
　このとき，VRAMをデーターセーブエリアに使用しますので，
　VRAMの内容をひどく書き換えるコマンド，プログラムの実行は避けてください．


■ファイラー）

　ファイラーの起動は

　　1.ファイルメニュー(F1)から起動．
  　2.[ESC]+[F]で起動．
  　3.[INPUT FILE]の要求時にリターンキーのみ入力し起動．

　で行います．
　このファイラーは，主に編集ファイルを指定するために装備しました．
　ファイルをセーブする前に，ディスクの空き容量を確保したり，
　ディスクの内容をちょっと確認したいときなどに便利です．


　ファイラーの操作には気をつける点がいくつかあります．

　編集中のファイルやテンポラリファイルを削除したり改名すると，
　誤動作します．

　　１．編集中のファイル，テンポラリファイルは，操作しないでください．

　編集中のファイルがあるとき，ファイラーでファイルを並びかえないでください．
　実際のディレクトリと内部処理との矛盾が出てしまい，誤動作します．

　　２．編集中のファイルがあるとき，ファイルを並びかえないでください．

　このファイラーは，メディアID=F9H(2DD,9ｾｸﾀ)のディスクで動作します．
　他のメディア，ドライブでの動作は確認していません．

　　３．複雑なドライブ構成には対応していません．


■テキストの編集）

　　テキスト編集エリアをVRAMの10000H - 1FFFFHにとっています．
　　さらに同時編集ファイル数で単純に等分割して，1ファイルあたりの
　　メモリを割当てます．編集ファイル数を増やすと，メモリが細分され，
　　動作が不安定になります．この仕様では同時8ファイル程度が限度です．

　　大きなファイルを編集するとき，viperはテンポラリファイル
　　（編集作業を記録するファイル）を作成します．
　　このとき，テンポラリファイルのサイズは巨大なものに
　　なります（編集中のファイルサイズの2倍程度）．
　　また，編集後のファイルをセーブするときのスペースも別に
　　必要です．
　　ですから，100KBのファイルを編集するなら，ディスクに
　　260KB程度の空きが必要です．

　　１．ディスクがいっぱいになると，テンポラリファイルを作成できずに
　　　　動作してしまいます．
　　　　このとき，'[INTERNAL ERROR] Disk full 'の表示が出ます．
　　　　これは，正常に編集できない状態ですので，
　　　　編集中のファイルを放棄してください．
　　　　（セーブせずにクローズしてください）
　　　　その後，ディスクの残りスペースを確かめてください．

　　同時編集ファイル数を減らすことで，テンポラリファイルの
　　サイズを抑えることができます．ディスクアクセスも減ります．
　　動作も安定します．

　　２．大きなファイルを編集するときは，起動時のパラメータで
　　　　同時編集ファイル数を調節してください．

　　テンポラリファイルを書き出した状態でリセット／電源OFFするなど，
　　終了機能を使わずにviperを抜けると，サイズ0のテンポラリファイルが残ります．
　　これはディスクが破壊されたあとの状態です．
　　このとき，10 - 100KB程度のデイスク容量が使えなくなります．

　　３．使用中のリセット等はなるべく避けてください．


■印刷について）

　ブロックモード時に[P]キーを押すと，指定範囲を印刷できます．
　ESC/Pプリンタを使用する場合，[F5]の'VIEW MENU'を呼び出し，
　'ESC/P mode'をONにしてください．
　また，'FF output'を指定すると，プリンタに'FFコード'が送られ，
　改ページ（用紙排出）できます．



 4． 資料



■本ソフトウエアの内容一覧）

　本ソフトの内容は，次の三個のファイルからなります．

      V.COM　　　　　　'viper'プログラム本体です．
      V.DOC　　　　　　'viper'操作マニュアルです．
      V.CFG            'viper'カスタマイズ用設定ファイルです．

■起動時のパラメータ）

　起動時パラメータに，編集するファイルを指定できます．
　また，起動時パラメータに同時オープンファイル数(1-8)などを指定できます．

設定例

A>V /8 /TA AUTOEXEC.BAT SAMPLE.TXT
　　同時オープンファイル数を8に設定します．
　　テンポラリファイルは，Aドライブに書き込みます．
　　最初にAUTOEXEC.BATとSAMPLE.TXTを読み込みます．

/(1-8) ......... 同時オープンファイル数です．
/T(A-H) ........ テンポラリファイルを書き込むドライブ名です．
/X(A-H) ........ 指定されたドライブに，自己複製を生成します．
/N ............. バイナリファイル（EOFコードのないファイル）を編集します．
/B ............. バックアップファイルを作成します（一世代のみ）．
/A(2,4,8) ...... タブカラム数を設定します．


■カスタマイズ）

　カスタマイザ xmark (x.com) を使用すると，
　viper 本体をカスタマイズできます．
　xmark はオンラインソフトとして公開されています．

　xmark + v.cfgでカスタマイズできる部分は
　以下の通りです．

　　1.　起動時設定の各種スイッチ．
　　2.　画面色
　　3.　キー入力

■カスタマイズの手順）

　　1.　安全のため，v.com,v.cfgのバックアップをとります．
　　2.　v.cfgの内容をviperで書換えます．
　　3.　xmarkを起動します．

A>X V.COM V.CFG
xmark version x.x

 check target file.
 generate object.
 linking.

complete.

A>_

　　4.　viperを起動し，動作を確認します．
　　　　これで終了しました．


■キーアサインの変更）

　　　キーアサインの設定表の機能番号を，対応する
　　　キーの場所に書き込みます．

　　　例）
　　　　　キーアサインの設定表の記載

70 [ESC]O	  /FILE OPEN
~~
　’ファイルのオープン’の機能番号は70です．


　　　　　V.CFGに記述

;240/^K
DB  70, 90, 91, 92;@-C
   ~~~~~これで，^K@でファイルのオープンができます．

;CTL+(GRP/BS /SCT/F1 /F2 /F3 )
DB   255, 31,  3,　70,124,125
　　　　　　     ~~~~
　　　これで，[CTRL]+[F1]でファイルのオープンができます．


■キーアサインの設定表）

操作例
　^E = [CTRL]キーと[E]キーを同時に押します．  
　^QS= [CTRL]キーと[Q]キーを同時に押したあと，[S]キーを押します．

  4 ^M,[RET]      /RETURN
  5 ^E            /CURSOR UP
  6 ^X            /CURSOR DOWN
  7 ^S            /CURSOR LEFT
  8 ^D            /CURSOR RIGHT
  9 ^A            /1 WORD RIGHT
 10 ^F            /1 WORD LEFT
 11 ^QS           /SCREEN LINEHEAD
 12 ^QD           /SCREEN LINETAIL
 13 ^V,[INS]      /INSERT/OVERWRITE
 14 ^H,[BS]       /BACK SPACE
 15 ^G,[DEL]      /DELETE
 20 ^U            /UNDELETE
 21 ^I,[TAB]      /TAB
 22 ^P            /ENTER CONTOROL CODE
 26 ^QV           /FREE CURSOR
 27 ^N            /INSERT CRLF

 31 ^QH,^[BS]     /LINEHEAD DEL
 32 ^QG,^[DEL]    /LINETAIL DEL
 33 ^W            /ROLL UP  (2LINE)
 34 ^Z            /ROLL DOWN(2LINE)
 35 ^R            /PAGE UP
 36 ^C            /PAGE DOWN
 39 ^QE           /SCREEN HEAD
 40 ^QX           /SCREEN TAIL
 41 ^QR           /TOP JUMP
 42 ^QC           /BOTTOM JUMP
 43 ^QP           /MARK JUMP
 44 ^QM           /MARK CURSOR POSITION
 45 ^QJ           /LINE JUMP

 46 ^B            /BLOCK CUT OR MEMORY
 47 ^Y            /CUT
 48 ^J            /PASTE
 49 [GRAPH]Y      /MEMORY
 50 [GRAPH]J      /COPY

 51 ^QW           /BACKWARD SEARCH/REPLACE
 52 ^QZ           /FORWARD SEARCH/REPLACE
 54 ^QQ           /REPLACE QUERY
 55 ^QF           /ENTER SEARCH WORD
 56 ^QA           /ENTER SEARCH & REPLACE WORD
 59 ^L            /PICK UP SEARCH WORD

 63 ^_            /NEXT TEXT CHANGE

 70 [ESC]O	  /FILE OPEN
 71 [ESC]U        /UNDO
 73 [ESC]C        /FILE CLOSE
 74 [ESC]L        /CLOSE OPEN
 75 [ESC]S        /FILE SAVE
 77 [ESC]Q        /QUIT EDITOR
 78 [ESC]E        /DOS COMMAND
 79 [ESC]X        /CLOSE ALL FILE
 82 [ESC]R        /FILE RENAME
 83 [ESC]I        /FILE INSERT
 85 [ESC]F        /FILER MODE
 86 [ESC]Z        /ESCAPE EDITOR

 90 ^KA           /TAB VIEW
 91 ^KB           /CRLF VIEW
 92 ^KC           /EOF VIEW
 94 ^KE           /CLICK SOUND
 95 ^KF           /FLASH LINE
 96 ^KG           /FUNCTION KEY
 97 ^KH           /SPLIT MODE
 98 ^KI,[HOME]    /SPLIT JUMP
 99 ^KJ           /FUZZY SEARCH
100 ^KK           /AUTO INDENT
102 ^KM,[CLS]     /SCREEN RESET
103 ^KN           /ESC/P MODE
104 ^KO           /FF OUTPUT

  * [STOP]        /BREAK CURSOR JUMP
                   BREAK SEARCH OR REPLACE


■制作過程で参考にした資料）

　本ソフトウエアの制作にあたって，次の資料を参考にしました．

　MSX2ﾃｸﾆｶﾙﾊﾝﾄﾞﾌﾞｯｸ　　　（アスキー）
　MSX-Datapack     　　　（アスキー）
　MSXﾃｸﾆｶﾙｶﾞｲﾄﾞﾌﾞｯｸ　　　（アスキャット）
　MSX-DOSｽｰﾊﾟｰﾊﾝﾄﾞﾌﾞｯｸ　 （アスキー）
　MSX-DOSｱｾﾝﾌﾞﾗﾌﾟﾛｸﾞﾗﾐﾝｸﾞ（アスキー）



 5． 使用・配布・権利について



　viper は、誰でも無料で自由に使用／配布できます．
　（予告なしに使用／配布条件を制限する場合があります．）
　このソフトウエアの著作権は宇佐美仁識が保有します．
　著作者はバグによる結果の責任は負いません．
　著作者はバグ修正の義務は負いません．

					1992/10/27　宇佐美仁識

　連絡先／MARIO-NET (0427-95-3421) ID=VIPER
          PAPY-NET                 ID=Y@USAMI
          PC-VAN                   ID=DWE35132


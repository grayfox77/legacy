


        MSX2(VRAM128K)用　テキストエディタ
		zero (z.com) の使い方



　この説明書は、次の章からなります。

 1． zero とは
 2． 簡単な使い方
 3． 注意事項
        仕様についての注意/ブロックカット＆ペースト/検索機能
        疑似子プロセス/ファイラー/テキストの編集

 4． 資料
        本ソフトウエアの内容一覧/日本語入力/起動時のパラメータ
        カスタマイズ/カスタマイズの手順/キーアサインの変更
        キーアサインの設定表/制作過程で参考にした資料

 5． 使用・配布・権利について



 1． zero とは



　zeroは，MSX-DOS1で動作する日本語テキストエディタです．
　MSX2(VRAM128KB)以上の機種で動作します．
　また，MSX-JEと漢字ROMが必要です．

　最高8ファイルまで，同時に編集することができます．
　編集ファイルサイズの制限がありません．

　主な機能はメニューに設定してあります．
　ファンクションキーでメニューを呼び出すことで，簡単に
　操作できます．

　検索，置換機能，カット＆ペースト，
　オートインデントやフリーカーソルなど，
　基本的な機能を完備しています．

　カスタマイザxmarkを使用することにより，
　キーアサイン，画面色，各種機能のスイッチを
　自由にカスタマイズができます．

　一度[DEL][BS]等で削除した文字列は，
　^Uにより無制限に復活できます．

　疑似子プロセスを実現しました．
　編集作業を中断して，他のDOSコマンドを実行できます．

　文字列入力要求時に，入力履歴を参照できます．
　ファイラーを装備しています．

　ESC/P系，MSX(NM)系両方のプリンタをサポートした
　印刷機能を装備しています．

　MSX-JE辞書への単語登録，削除ができます．



 2． 簡単な使い方



■起動）
　MSX-DOS1を起動し，
A>Z
　とします．起動したら編集するファイル名を入力します．

■編集）
　主な機能はファンクションキーで呼び出せます．
　[F1]-[F5]が基本メニュー，[CTRL]+[F5]が拡張メニューです．

■終了）
　F1キーを押したあと，Qを押します．これでDOSに戻ります．
　セーブが必要なら，セーブ後終了してください．



 3． 注意事項



■仕様についての注意）

　このエディタは，(標準で)半角と全角を同じ大きさで表示します．
　このとき，半角と全角の見分けが難しいことがあります．
　'反転表示'機能が便利です．(標準で)全角文字を反転して表示します．
　'反転表示'は，表示メニュー[F5]から呼び出せます．

　起動時のオプションにより，全角の圧縮表示を解除できます．
　起動時のオプションにより，反転する文字を半角に設定できます．

　ファイラーを起動するとテキストスタックの内容が失われます．
　これは，同じVRAMをワークスペースとして共有しているためです．

  行数は画面行をカウントします．

　カット&ペーストのバッファ（テキストスタック）のサイズに制限は
　ありません（16KBを越えるとヤンクファイルに退避します）．


■ブロックカット＆ペースト）

　^B        [C]ブロックを削除　[M]ブロックを記憶
            [P]ブロックを印刷　[W]ブロックをファイルに出力
  ^J        削除または記憶したブロックを転送
  [GRAPH]J  削除または記憶したブロックを複写（何回でも可）

　操作例

　ブロック削除　^BC
　ブロック複写　^BM のあと複写先へカーソルを動かし ^Jまたは[GRAPH]J
　フロック移動　^BC のあと移動先へカーソルを動かし ^J


■検索機能）

　大文字，小文字を区別しない検索（ファジーサーチ）モードがあります．
　[CTRL]+[L]で，編集画面から検索キーワードを拾えます．
　（[CTRL]+[Q] AND [W]/[Z]で後方／前方検索です．）


■疑似子プロセス）

　編集を継続しながら，一時的にDOSのコマンド，アセンブラなどを
　実行できます．
　DOS画面でコマンド，プログラムを実行したあと，再度Z.COMを起動することで
　編集へ復帰できます．
　このとき，VRAMをデーターセーブエリアに使用しますので，
　VRAMの内容をひどく書き換えるコマンド，プログラムの実行は避けてください．


■ファイラー）

  　1.[ESC]+[F]で起動．
  　2.[INPUT FILE]の要求時にリターンキーのみ入力し起動．

　で行います．
　このファイラーは，主に編集ファイルを指定するために装備しました．
　ファイルをセーブする前に，ディスクの空き容量を確保したり，
　ディスクの内容をちょっと確認したいときなどに便利です．


　ファイラーの操作には気をつける点がいくつかあります．

　編集中のファイルやテンポラリファイルを削除したり改名すると，
　誤動作します．

　　１．編集中のファイル，テンポラリファイルは，操作しないでください．

　編集中のファイルがあるとき，ファイラーでファイルを並びかえないでください．
　実際のディレクトリと内部処理との矛盾が出てしまい，誤動作します．

　　２．編集中のファイルがあるとき，ファイルを並びかえないでください．

　このファイラーは，メディアID=F9H(2DD,9ｾｸﾀ)のディスクで動作します．
　他のメディア，ドライブでの動作は確認していません．

　　３．複雑なドライブ構成には対応していません．


■テキストの編集）

　　テキスト編集エリアをVRAMの10000H - 1FFFFHにとっています．
　　さらに同時編集ファイル数で単純に等分割して，1ファイルあたりの
　　メモリを割当てます．編集ファイル数を増やすと，メモリが細分され，
　　動作が不安定になります．この仕様では同時8ファイル程度が限度です．

　　大きなファイルを編集するとき，zeroはテンポラリファイル
　　（編集作業を記録するファイル）を作成します．
　　このとき，テンポラリファイルのサイズは巨大なものに
　　なります（編集中のファイルサイズの2倍程度）．
　　また，編集後のファイルをセーブするときのスペースも別に
　　必要です．
　　ですから，100KBのファイルを編集するなら，ディスクに
　　260KB程度の空きが必要です．

　　１．ディスクがいっぱいになると，テンポラリファイルを作成できずに
　　　　動作してしまいます．
　　　　このとき，'[内部エラー] ディスクがいっぱいです'の表示が出ます．
　　　　これは，正常に編集できない状態ですので，
　　　　編集中のファイルを放棄してください．
　　　　（セーブせずにクローズしてください）
　　　　その後，ディスクの残りスペースを確かめてください．

　　同時編集ファイル数を減らすことで，テンポラリファイルの
　　サイズを抑えることができます．ディスクアクセスも減ります．
　　動作も安定します．

　　２．大きなファイルを編集するときは，起動時のパラメータで
　　　　同時編集ファイル数を調節してください．

　　テンポラリファイルを書き出した状態でリセット／電源OFFするなど，
　　終了機能を使わずにzeroを抜けると，サイズ0のテンポラリファイルが残ります．
　　これはディスクが破壊されたあとの状態です．
　　このとき，10 - 100KB程度のデイスク容量が使えなくなります．

　　３．使用中のリセット等はなるべく避けてください．


■印刷について）

　ブロックモード時に[P]キーを押すと，指定範囲を印刷できます．
　ESC/Pプリンタを使用する場合，[CTRL]+[F5]で拡張メニューを
　呼び出し，'ESC/Pモード'をONにしてください．
　また，改ページ出力を指定すると，プリンタに'FFコード'が送られ，
　改ページ（用紙排出）できます．

■MSX-JE辞書の操作ついて）

　[CTRL]+[F5]'拡張メニュー'から，MSX-JE辞書への単語の登録，
　単語の削除ができます．このとき，操作に失敗すると，エラー
　番号が表示されます．エラー番号には次のような意味があります．

　　１．辞書登録時のエラー番号

　　　　001 = 空き領域がありません．
　　　　002 = 同音語の数が多すぎます．
　　　　004 = 読みデータが不適切です．
　　　　008 = 単語データが不適切です．
　　　　016 = 品詞データが不適切です．
　　　　255 = このMSX-JEでは辞書登録ができません．

　　２．辞書削除時のエラー番号

　　　　001 = 削除対象の単語がありません．
　　　　004 = 読みデータが不適切です．
　　　　008 = 単語データが不適切です．
　　　　016 = 品詞データが不適切です．
　　　　255 = このMSX-JEでは辞書削除ができません．



 4． 資料



■本ソフトウエアの内容一覧）

　本ソフトの内容は，次の三個のファイルからなります．

      Z.COM　　　　　　'zero'プログラム本体です．
      Z.DOC　　　　　　'zero'操作マニュアルです．
      Z.CFG            'zero'カスタマイズ用設定ファイルです．


■日本語入力）

　本ソフトはMSX-JEの仮想端末入力インターフェースを使用しています．
　BASICの漢字モード等と同じ操作で，日本語入力ができます．
　詳しくはMSX本体に付属のマニュアル等を参照してください．

■起動時のパラメータ）

　起動時パラメータに，編集するファイルを指定できます．
　また，起動時パラメータに同時オープンファイル数(1-8)などを指定できます．

設定例

A>Z /8 /TA AUTOEXEC.BAT SAMPLE.TXT
　　同時オープンファイル数を8に設定します．
　　テンポラリファイルは，Aドライブに書き込みます．
　　最初にAUTOEXEC.BATとSAMPLE.TXTを読み込みます．

/(1-8) ......... 同時オープンファイル数です．
/T(A-H) ........ テンポラリファイルを書き込むドライブ名です．
/X(A-H) ........ 指定されたドライブに，自己複製を生成します．
/N ............. バイナリファイル（EOFコードのないファイル）を編集します．
/B ............. バックアップファイルを作成します（一世代のみ）．
/A(2,4,8) ...... タブカラム数を設定します．
/M ............. 全角文字を圧縮せずに表示します．
/H ............. 反転文字を半角にします．
/S ............. MSX-JEの表示をシステムライン固定にします．


■カスタマイズ）

　カスタマイザ xmark (x.com) を使用すると，
　zero 本体をカスタマイズできます．
　xmark はオンラインソフトとして公開されています．

　xmark + z.cfgでカスタマイズできる部分は
　以下の通りです．

　　1.　起動時設定の各種スイッチ．
　　2.　画面色
　　3.　キー入力

　注／残念ですが，DOSのパレット設定を壊さずに
　　　起動することはできません．

　　　MSX2/2+の方は，省略高速表示をONにすると，
　　　JEの表示が少し速くなります．


■カスタマイズの手順）

　　1.　安全のため，z.com,z.cfgのバックアップをとります．
　　2.　z.cfgの内容をzeroで書換えます．
　　3.　xmarkを起動します．

A>X Z.COM Z.CFG
xmark version x.x

 check target file.
 generate object.
 linking.

complete.

A>_

　　4.　zeroを起動し，動作を確認します．
　　　　これで終了しました．


■キーアサインの変更）

　　　キーアサインの設定表の機能番号を，対応する
　　　キーの場所に書き込みます．

　　　例）
　　　　　キーアサインの設定表の記載

70 [ESC]O	  /ファイルのオープン
~~
　’ファイルのオープン’の機能番号は70です．


　　　　　Z.CFGに記述

;240/^K
DB  70, 90, 91, 92;@-C
   ~~~~~これで，^K@でファイルのオープンができます．

;CTL+(GRP/BS /SCT/F1 /F2 /F3 )
DB   255, 31,  3,　70,124,125
　　　　　　     ~~~~
　　　これで，[CTRL]+[F1]でファイルのオープンができます．


■キーアサインの設定表）

操作例
　^E = [CTRL]キーと[E]キーを同時に押します．  
　^QS= [CTRL]キーと[Q]キーを同時に押したあと，[S]キーを押します．

【メニューの呼び出し】

  [F1]-[F5]　　　/基本メニュー呼び出し
  ^[F5]　　　　　/拡張メニュー

【カーソルの移動（基本）】
 
  4 ^M,[RET]      /改行
  5 ^E            /カーソル上移動
  6 ^X            /カーソル下移動
  7 ^S            /カーソル左移動
  8 ^D            /カーソル右移動
  9 ^A            /一語右移動
 10 ^F            /一語左移動
 11 ^QS           /画面行頭へ移動
 12 ^QD           /画面行末へ移動

【基本的な編集機能】

 13 ^V,[INS]      /挿入，上書モード変更
 14 ^H,[BS]       /カーソル前の文字を削除
 15 ^G,[DEL]      /カーソル上の文字を削除
 20 ^U            /削除文字列の復活
 21 ^I,[TAB]      /タブ
 22 ^P            /制御文字の入力
 26 ^QV           /フリーカーソルモード変更
 27 ^N            /改行コードの挿入
 31 ^QH,^[BS]     /カーソルから画面行頭までを削除
 32 ^QG,^[DEL]    /カーソルから画面行末までを削除

【カーソルの移動（拡張）】

 33 ^W            /2行ロールアップ
 34 ^Z            /2行ロールダウン
 35 ^R            /ページアップ
 36 ^C            /ページダウン
 39 ^QE           /画面左上端へ移動
 40 ^QX           /画面右下端へ移動
 41 ^QR           /ファイルの先頭へ移動
 42 ^QC           /ファイルの最後へ移動
 43 ^QP           /マークジャンプ
 44 ^QM           /カーソル位置をマーク
 45 ^QJ           /指定画面行へジャンプ

【カット＆ペースト】

 46 ^B            /ブロック削除，記憶
 47 ^Y            /1行削除
 48 ^J            /転写
 49 [GRAPH]Y      /1行記憶
 50 [GRAPH]J      /複写
 58 ^T            /行の二重化

【検索，置換機能】

 51 ^QW           /上方向への検索，置換
 52 ^QZ           /下方向への検索，置換
 54 ^QQ           /置換確認のモード変更
 55 ^QF           /検索文字列の入力
 56 ^QA           /検索置換文字列の入力
 59 ^L            /テキストから検索文字列を取得

【ファイル，テキスト操作】

 63 ^_            /次テキストの選択
 70 [ESC]O	  /ファイルのオープン
 71 [ESC]U        /編集のやり直し
 73 [ESC]C        /ファイルのクローズ
 74 [ESC]L        /クローズ・オープン
 75 [ESC]S        /ファイルのセーブ
 77 [ESC]Q        /エディタを終了
 78 [ESC]E        /DOSコマンドの実行
 79 [ESC]X        /全ファイルのクローズ
 82 [ESC]R        /ファイル名の変更
 83 [ESC]I        /カーソル位置へファイルを挿入
 85 [ESC]F        /ファイラーの起動
 86 [ESC]Z        /エディタを強制終了

【画面表示の変更など】

 90 ^KA           /TABコード表示 ON/OFF
 91 ^KB           /CRLFコード表示 ON/OFF
 92 ^KC           /[EOF]の表示 ON/OFF
 94 ^KE           /クリック音 ON/OFF
 95 ^KF           /フラッシュラインモード ON/OFF
 96 ^KG           /ファンクションキー表示 ON/OFF
 97 ^KH           /画面分割モード変更
 98 ^KI,[HOME]    /分割画面間の移動
 99 ^KJ           /ファジー検索 ON/OFF
100 ^KK           /オートインデントON/OFF
101 ^KL           /反転表示 ON/OFF
102 ^KM,[CLS]     /画面の再表示
103 ^KN           /ESC/Pモード ON/OFF
104 ^KO           /改ページ出力
105 ^KP           /MSX-JE辞書登録
106 ^KQ           /MSX-JE辞書削除

  * [STOP]        /カーソルジャンプ時の中断
                   置換，検索の中断


■制作過程で参考にした資料）

　本ソフトウエアの制作にあたって，次の資料を参考にしました．

　MSX2ﾃｸﾆｶﾙﾊﾝﾄﾞﾌﾞｯｸ　　　（アスキー）
　MSX-Datapack     　　　（アスキー）
　MSXﾃｸﾆｶﾙｶﾞｲﾄﾞﾌﾞｯｸ　　　（アスキャット）
　MSX-DOSｽｰﾊﾟｰﾊﾝﾄﾞﾌﾞｯｸ　 （アスキー）
　MSX-DOSｱｾﾝﾌﾞﾗﾌﾟﾛｸﾞﾗﾐﾝｸﾞ（アスキー）



 5． 使用・配布・権利について



　zero は、誰でも無料で自由に使用／配布できます．
　（予告なしに使用／配布条件を制限する場合があります．）
　このソフトウエアの著作権は宇佐美仁識が保有します．
　著作者はバグによる結果の責任は負いません．
　著作者はバグ修正の義務は負いません．

					1993/ 1/10　宇佐美仁識

　連絡先／MARIO-NET (0427-95-3421) ID=VIPER
          PAPY-NET                 ID=Y@USAMI
          PC-VAN                   ID=DWE35132


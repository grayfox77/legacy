
　　　　　　　　　　　ＡＮＩＭＥＣＨＡ　ｖｅｒ２.００

　　　　　　　　　　　アニメーションデータ構造　解説書


　　　　　　　　　　　　　　by MAR'Z PROJECT





　ツール用データファイル（ＡＭＣ）は次のような構成になっています。

	インデックス	　　　サイズ		　　内容
	---------------------------------------------------------------
		0		3		チェックデータ
		3		2		残りリソース量 (DW)
		5		1		コマ数 (DB)
		6		?		座標・パレット制御データ
		?		コマ数		表示時間データ
		?		コマ数		各コマのセル数


　★チェックデータ
　　アニメカｖ２のデータであることを調べるためのチェックデータです。"AM2"と入
　　ります。

　★残りリソース量
　　座標・パレット制御データの領域があと何バイトあるかという値です。初期状態で
　　２８００Ｈバイトあり、使った分をそこから減らしていきます。

　★コマ数
　　何コマ登録されているかという値です。最後の空きコマは数に入れません。ですか
　　ら、初期状態では０、最大登録時では２５５となります。

　★座標・パレット制御データ
　　セルの座標やパレットチェンジの情報が入ります。何のデータであるかは先頭で判
　　断します。１コマの終わりに［改コマコード］が入り、最終コマの終わりに［終了
　　コード］が入ります。
　　この領域のサイズは、（２８００Ｈ−［残りリソース量］）で求められます。

　　＜＜特殊コード＞＞
　　　00H			終了コード
　　　01H			改コマコード
　　　02H			ヌル（空きコマを意味する）

　　＜＜パレット＞＞
　　　03H,ｐ,ｎ			パレットチェンジ情報
				　　ｐ＝0：フェードアウト
					1：ホワイトアウト
					2：パレットバンク０
					3：	〃       １
					         ：
		        			 ：
					9：パレットバンク７
				　　ｎ＝１輝度変化にかける時間（1/60秒）0-99

　　＜＜セル＞＞
　　　8?H,dx,dy,nx,ny,c		ボックスセル
　　　C?H,dx,dy,nx,ny,c		     〃
				　最初のコードがそのままVDPｺﾏﾝﾄﾞになります。
				　　dx＝表示Ｘ始点
				　　dy＝表示Ｙ始点
				　　nx＝横の長さ
				　　ny＝縦の長さ
				　　c ＝カラー番号

　　　9?H,sx,sy,sp,dx,dy,nx,ny	ＣＧセル
　　　D?H,sx,sy,sp,dx,dy,nx,ny	   〃
				　最初のコードがそのままVDPｺﾏﾝﾄﾞになります。
				　　sx＝元絵のＸ始点
				　　sy＝元絵のＹ始点
				　　sp＝元絵のページ(1,2)
				　　dx＝表示Ｘ始点
				　　dy＝表示Ｙ始点
				　　nx＝横の長さ
				　　ny＝縦の長さ

　★表示時間データ
　　表示する時間（1/60秒単位）がコマ数分入ります。

　★各コマのセル数
　　各コマに登録されているセルの数がコマ数分入ります。最後の空のセル番号はセル
　　数に入らないので、何も登録されていないコマだと０になります。


// -------------------------------------------------------------
//	TITLE	:	SCREEN2 アニメーションエンコーダ
//	VERSION	:	v0.10625
//	INPUT	:	t.hara (HRA!)
//	PLATFORM:	MS-Windows9x/Me/NT4/2000 のコマンドライン
//	LICENCE	:	フリーウェア/再配布自由
// -------------------------------------------------------------

■SCREEN2 アニメーションプロジェクト（？）
	SCREEN2 というあまり使われないモードを使って、フル画面アニメー
	ションを実行しよう・・・という、無謀かつ無意味なプロジェクトで
	す (^_^;

■このソフト
	専用アニメーションデータ AS2形式（Animation for Screen2）を作成
	するツールです。

■動作
	F0000000.SC2 のような名前の画像データを一つのフォルダへ入れてく
	ださい。0000000（７桁）の部分は１６進数のフレーム番号です。
	番号がとぎれるところまで結合するので、飛び番は使えません。
	その画像を格納したフォルダに SC2ANIME.EXE をコピーして次のよう
	にコマンドラインから実行してください。

	C:\My Documents\My Movie\>SC2ANIME BASKET.AS2

	カレントディレクトリ（C:\My Documents\My Movie）は、画像が格納
	してあるフォルダにしておいてください。
	引数の BASKET.AS2 は生成されるファイル名です。拡張子も省略せず
	に指定してください。

	C:\My Documents\My Movie\>SC2ANIME BASKET.AS2 100

	このように１フレーム中に更新するパーツ数を指定することも出来ま
	す。上記の例の場合は 100 パーツ更新になります。1〜768 の数値を
	指定でき、1 が最高速、768 が最高画質になります。省略すると 150
	になります。

■データ構造
	データの先頭 3024H byte はヘッダになります。

	+-------+
	| ID	|	+0000h	...	'A','S','2',0 の４バイトが記録される
	+-------+
	| PAL	|	+0004h	...	32byte のＭＳＸパレットデータ。アニメは常に
	|		|				このパレットで再生されます。構造は MSX-BASIC
	|		|				が VRAM上に作成するパレットエリアと同じです。
	+-------+
	| 1st	|	+0024h	...	最初のフレームデータです。これはパターンジェ
	| frame	|				ネレータテーブルとカラーテーブルのデータがそ
	+-------+				のまま続けて記録されてます。

	これ以降は、差分データになります。再生ソフトはこの差分データに従って
	VRAM を更新していきます。
	差分データは、次の種類があります。

	00h 〜 80h	...	オフセット。１フレームはパターンネームテーブルの +767
					に相当する位置を基準に、左上へ着目点を移動していく方式
					です。このどの程度左・上に戻るかを指定する移動値です。
					着目点の移動のみを行います。
	81h			...	キャラクタデータです。これに続く１６バイトの前半８バイ
					トを着目点のパターンジェネレータデータ、後半８バイトを
					カラーデータとして VRAM更新を指示します。
	82h			...	フレーム終了です。ここでは着目点を +767 へ戻します。必
					要に応じてフレームウェイトを掛ければ、フレームの切れ目
					にメリハリをつけることが出来ます。
	83h			...	データ終了です。これ以降に有効なデータはありません。本
					エンコーダでは読み出し側が楽なように 2nd frame 以降の
					データ合計サイズが 16KB の倍数になるように 83h を余分に
					付与します。

■紹介
	拙作の AVI cutter を使うと Windows AVI ファイルを BMP ファイルに分割す
	る事が出来ます。これをさらに拙作の BMP2MSX を使い同一パレットで変換すれ
	ば Fxxxxxxx.SC2 を簡単に作成することが出来ます。これらは次のＵＲＬにあ
	るダウンロードページにてダウンロードすることが出来ます。

	http://www.imasy.or.jp/~hra/

■お約束
	このソフトを使用していかなる損害・問題が発生しても、作者ならび
	に関係者は責任を負いません。各自の責任の下でご使用くださいませ。

■連絡先
	URL:	http://www.imasy.or.jp/~hra/
	E-Mail:	hra@imasy.or.jp

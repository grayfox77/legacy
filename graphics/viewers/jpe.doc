▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼▽▼

  JPEG-file encoder						JPE.COM

	ＪＰＥ ver0.03

		動作機種：MSX2+/turboR
				VDP : V9958

		動作環境：MSX-DOS2

	copyright (c)1996	Hiroyuki_KAKAMI		各務 裕之
	special-thanks		SEIGA			青河

▲△▲△▲△▲△▲△▲△▲△▲△▲△▲△▲△▲△▲△▲△▲△▲△▲△▲△▲△▲



■【概要】

　MSX-DOS2 の外部コマンドとして動作する、ＪＰＥＧ画像エンコーダです。

　インターレースＹＪＫベタ画像 (256x424:19268) を JFIF-format で符号化し
ます。詳細は以下の通りです。
		・画像サイズ 512x424（横方向に２倍拡大）
		・Baseline-DCT（基本方式ＤＣＴ符号化）
		・Non-Hierarchical（非階層型）
		・Interleave（インターリーヴ方式）
		・ＹＵＶ色空間
		・色差間引き (2x1)

　ＤＣＴ符号化を使用している為、非可逆圧縮となります。
　即ち、出力された JPEG ファイルからは、完全には元の画像を再現出来ません。


　以下の説明のうち、次のような文字はそれぞれ次の意味を表します。
	< ･･ >	：　省略不可能
	[ ･･ ]	：　省略可能




■【使用方法】

　「ＪＰＥ」は MSX-DOS2 上で使用します。usage は次のようになります。

	:> JPE.COM  <画像ファイル[.S1C]>  [出力パス]  [オプション]


《画像ファイル》
　ＹＪＫベタ画像ファイルを、Drive-Path-File で指定します。
　ワイルドカードの指定も可能です。

　偶・奇数ページのファイル名は、拡張子を除いて一致している必要があります。
　拡張子には、奇数ページを示すファイル名を指定します。偶数ページは自動的
にロードされます。

　奇数ページ→偶数ページの対応は、以下の２通りのみです。
	・".S1C" → ".SCC"	（省略時）
	・".SC1" → ".SC0"


《出力パス》
　JPEG ファイルを出力するディレクトリを、Drive-Path で指定します。
　省略した場合は、カレントディレクトリに出力します。

　既に同名の JPEG ファイルがあった場合は、（defaultでは）スキップします。


《オプション》
　オプションは大文字でも小文字でも構いません。
　１つのオプションの前には、必ず１つの "/" を付けてください。

  /H	: help
		ヘルプを標準出力に表示します。

  /Q{D|A}<n> : quality	（n = 0〜[5]〜9）
		画質を指定します。
		数値が小さい程サイズが小さくなりますが、画質が劣化します。
		非可逆圧縮の為、最高値を指定しても元の画像を再現出来ません。

  /N	: not-overwrite						(default)
		既に同名の JPEG ファイルがあった場合、スキップします。

  /O	: overwrite
		既に同名の JPEG ファイルがあった場合でも、上書きします。

  /Y<y>	: Y-number （y = 1〜[424]）
  /X<x> : X-number （x = 1〜[512]）
		画像の下端・右端を変更します。
		(0,0) から (x-1,y-1) までが保存されます。


《環境変数》

　JPEOPT	ディフォルトオプションを記述することが出来ます。




■【エラー】

・Not MSX-DOS2.
　　DOS1や他のCP/M等で起動したときに表示されます。

・Bad option.
　　存在しないオプションを指定したときに表示されます。

・Too many Parameters.
　　パラメータの数が多すぎます。

・Bad Environment-option.
　　環境変数 "JPEOPT" に書かれた内容が不正です。

・Not enough TPA.
　　ＴＰＡサイズが不足しています。




■【諸注意】

　ＶＤＰの I/O ポートアドレスを n=n'=98h と固定している為、これ以外のＭ
ＳＸでは動作しません。（動作機種が MSX2+ 以上なので、問題無いと思います）

　画像のロード中に、[spc] でスキップ、[esc] で強制終了します。
　エンコード中は途中停止出来ません。
　次のファイルに移るまでに [esc] を押せば、エンコード後に強制終了します。




■【参考】

・青河氏作
		ＪＰＥＧセーバ "JSV.COM ver0.01" ソースファイル


・オーム社出版局
		わかりやすい ＪＰＥＧ／ＭＰＥＧ２の実現法	（￥２８００）
						   小野 定康・鈴木 純司  共著

・ＡＳＣＩＩ出版局
		最新ＭＰＥＧ教科書				（￥２９００）
								藤原 洋  監修




■【使用および配布について】

　このソフトウェアは Free-ware です。著作権は作者が保持しています。営利
・非営利を問わず、誰でも無料で使用することができます。

　転載・配布は自由です。確認及び連絡なども、特に必要としません。
　各自に於いて改良・改造したものは、その旨（原作者名，改造者名，改造箇所）
を明記した上で、配布は自由とします。

　このソフトウェアを使用した結果の影響については一切の責任を負いかねます
ので、あらかじめご了承ください。




■【謝辞】

　このプログラム中、青河氏作のＭＳＸ版ＪＰＥＧセーバ "JSV.COM" のアセン
ブリ・ソースファイルを一部参照しています。
　更に "JSV.COM" は、戦うクラリス氏作の "JPGVQ0" のＣ言語ソースを参考に
している為、"JPE" も上プログラムの一部を利用していることになります。

　この場をもって、両氏に深く御礼申し上げます。




■【奥付】

　お待たせ。ようやくインターレース画像の JPEG エンコーダが出来ました。
　画像１枚につき、turboR で１分少々掛かります。気長に待って下さい。

　まだまだ発色が気に入らないけど、これ以上向上出来ませんでした。


				〒500 岐阜市宇佐南１-２-５
							各務 裕之 （ＡＰｉ）

	東京	Natsume-Net				NAT26323
	東京	MARIO-NET				API
	岐阜	あしながねっと				API
	大阪	Illusion City				API
	愛知	PrincessPrincess-NET			API
	石川	ネットフレンティ金沢			NWC03867

	E-mail	:     kakami@toriwaki.nuie.nagoya-u.ac.jp
	URL	: http://www.toriwaki.nuie.nagoya-u.ac.jp/~kakami/


[eof]
